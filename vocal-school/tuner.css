/* pitch.css переименован в tuner.css */
.app-container-tuner {
    display: flex;
    flex-direction: column;
    height: calc(100vh - 45px); /* 45px - примерная высота хедера */
}
.output-display { text-align: center; padding: 10px; background-color: var(--tg-theme-secondary-bg-color, #1e1e1e); flex-shrink: 0; border-bottom: 1px solid #333; transition: background-color 0.3s; }
.note-display { font-size: 36px; font-weight: bold; line-height: 1; display: flex; align-items: center; justify-content: center; position: relative; }
#octave { font-size: 18px; vertical-align: super; }
.details-display { font-size: 12px; color: var(--tg-theme-hint-color, #888); }
#target-note-display { font-size: 14px; font-weight: bold; color: var(--tg-theme-text-color, #fff); height: 18px; margin-bottom: 4px; }
.main-content { display: flex; flex-grow: 1; position: relative; cursor: grab; }
.main-content:active { cursor: grabbing; }
.piano-viewport, .canvas-viewport { height: 100%; overflow: hidden; position: relative; }
.piano-viewport { flex: 0 0 50px; background: #333; border-right: 2px solid #555; }
.canvas-viewport { flex-grow: 1; }
#piano-container, #pitch-canvas { position: absolute; left: 0; top: 0; width: 100%; will-change: transform; }
.key { position: absolute; width: 100%; box-sizing: border-box; border: 1px solid #000; }
.key.white { background-color: #fff; z-index: 1; }
.key.black { background-color: #333; width: 60%; z-index: 2; }
.key:active { background-color: #ffc107; }
.key.target { background-color: #007bff; transition: background-color 0.3s; }
.key.target.black { background-color: #0056b3; }
.key-label { position: absolute; left: 0; right: 0; text-align: center; pointer-events: none; }
.key.white .key-label { bottom: 5px; font-size: 16px; font-weight: bold; color: #333; text-align: right; padding-right: 7px; }
.key.white.target .key-label { color: #fff; }
.key.black .key-label { bottom: 3px; font-size: 10px; font-weight: normal; line-height: 1.2; color: #fff; }

.controls { display: flex; align-items: center; justify-content: space-between; padding: 5px 10px; background-color: var(--tg-theme-secondary-bg-color, #1e1e1e); flex-shrink: 0; border-top: 1px solid #333; }
.main-controls { text-align: center; flex-grow: 1; }
#startButton, #holdButton { width: 40%; max-width: 130px; padding: 10px; font-size: 16px; border: none; border-radius: 8px; color: var(--tg-theme-button-text-color, #fff); background-color: var(--tg-theme-button-color, #007bff); margin: 0 5px; }
.octave-btn, .icon-btn { flex-shrink: 0; width: 40px; height: 40px; font-size: 20px; border: 1px solid #555; border-radius: 50%; background-color: #333; color: var(--tg-theme-text-color, #fff); cursor: pointer; display: flex; align-items: center; justify-content: center; }
.octave-btn:active, .icon-btn:active { background-color: #555; }
#startButton.listening { background-color: #dc3545; }
#status-message { font-size: 11px; margin: 5px 0 0; color: var(--tg-theme-hint-color, #888); }
.output-display.correct { background-color: #28a745; }
.output-display.octave-miss { background-color: #ffc107; }
.output-display.wrong { background-color: #dc3545; }

.tuner-container { margin-top: 8px; height: 10px; display: flex; justify-content: center; }
.tuner-bar { width: 80%; max-width: 250px; height: 100%; background-color: #333; border-radius: 5px; position: relative; overflow: hidden; border: 1px solid #555; }
#tuner-indicator { position: absolute; top: 0; left: 50%; width: 4px; height: 100%; background-color: #ffc107; transform: translateX(-50%); transition: left 0.1s linear; opacity: 0; }
.tuner-bar::after { content: ''; position: absolute; top: 0; left: 50%; transform: translateX(-50%); width: 10%; height: 100%; background-color: rgba(40, 167, 69, 0.5); }
#holdButton { background-color: #6c757d; }
#holdButton.active { background-color: #ffc107; color: #000; }
#referenceToneButton { background: none; border: none; color: var(--tg-theme-hint-color, #888); cursor: pointer; padding: 0 5px; position: absolute; right: 15%; top: 50%; transform: translateY(-50%); }
#referenceToneButton:hover { color: var(--tg-theme-text-color, #fff); }
#referenceToneButton.active { color: #ffc107; }
.hidden { display: none !important; }

/* --- СТИЛИ ДЛЯ ПРОГРЕССА И СТАТИСТИКИ --- */
#progress-area { margin-top: 10px; padding: 0 10%; }
.level-info { display: flex; justify-content: space-between; font-size: 10px; margin-bottom: 4px; color: var(--tg-theme-hint-color, #aaa); }
.progress-bar-container { height: 6px; background-color: #333; border-radius: 3px; overflow: hidden; }
#progress-bar-fill { width: 0%; height: 100%; background-color: #ffc107; transition: width 0.5s ease-out; }
.modal-backdrop { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.7); z-index: 1000; display: flex; align-items: center; justify-content: center; }
.modal-content { background-color: var(--tg-theme-secondary-bg-color, #1e1e1e); padding: 20px; border-radius: 12px; width: 90%; max-width: 400px; box-shadow: 0 5px 15px rgba(0,0,0,0.5); }
.modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; border-bottom: 1px solid #444; padding-bottom: 10px; }
.modal-header h2 { margin: 0; font-size: 18px; }
.close-btn { background: none; border: none; color: #fff; font-size: 24px; cursor: pointer; }
.stats-list { display: flex; flex-direction: column; gap: 12px; }
.stat-item { display: flex; justify-content: space-between; align-items: center; font-size: 14px; }
.stat-label { color: var(--tg-theme-hint-color, #aaa); }
.stat-value { font-weight: bold; }

/* НОВЫЙ СТИЛЬ для заголовков в модальном окне */
.stats-header {
    font-size: 16px;
    font-weight: bold;
    color: var(--tg-theme-text-color, #fff);
    margin: 15px 0 10px 0;
    padding-bottom: 5px;
    border-bottom: 1px solid #444;
}
.stats-header:first-of-type {
    margin-top: 0; /* Убираем верхний отступ у первого заголовка */
}